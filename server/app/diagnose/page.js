(()=>{var e={};e.id=89,e.ids=[89],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3254:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>r.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=t(7096),i=t(6132),n=t(7284),r=t.n(n),l=t(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(a,o);let d=["",{children:["diagnose",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7841)),"/Users/hariharan/Desktop/codebase/plant-doctor-frontend/src/app/diagnose/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8525)),"/Users/hariharan/Desktop/codebase/plant-doctor-frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/hariharan/Desktop/codebase/plant-doctor-frontend/src/app/diagnose/page.tsx"],m="/diagnose/page",p={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/diagnose/page",pathname:"/diagnose",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7153:(e,a,t)=>{Promise.resolve().then(t.bind(t,770))},770:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>DiagnosePage});var s=t(784),i=t(9885),n=t(4571),r=t(2170),l=t(2717),o=t(5304);let ImageUpload=({onImageSelect:e,isLoading:a=!1})=>{let[t,d]=(0,i.useState)(null),[c,m]=(0,i.useState)(null),p=(0,i.useCallback)(a=>{let t=a[0];if(t){m(t),e(t);let a=new FileReader;a.onload=()=>{d(a.result)},a.readAsDataURL(t)}},[e]),{getRootProps:u,getInputProps:x,isDragActive:h}=(0,r.uI)({onDrop:p,accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxFiles:1,disabled:a});return s.jsx("div",{className:"w-full",children:t?(0,s.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative rounded-lg overflow-hidden",children:[s.jsx("img",{src:t,alt:"Plant preview",className:"w-full h-64 object-cover rounded-lg"}),!a&&s.jsx(o.z,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-1",onClick:()=>{d(null),m(null)},children:s.jsx(l.apv,{className:"h-5 w-5"})}),a&&s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})})]}):(0,s.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:`border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ${h?"border-primary-400 bg-primary-50":"border-gray-300 hover:border-primary-300"} ${a?"opacity-50 cursor-not-allowed":""}`,...u({onAnimationEnd:void 0}),children:[s.jsx("input",{...x()}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[s.jsx(l.h5O,{className:"h-12 w-12 text-gray-400"}),s.jsx("p",{className:"text-lg font-medium",children:h?"Drop the image here":"Drag & drop a plant image here"}),s.jsx("p",{className:"text-sm text-gray-500",children:"or click to select a file"}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Supported formats: JPEG, PNG, GIF"})]})]})})};var d=t(7040);let DiagnosisResult=({diagnosis:e,imageUrl:a})=>{if(!e||0===e.length)return null;let t=e[0],i={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,s.jsxs)(n.E.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"mt-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Diagnosis Results"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[a&&s.jsx(n.E.div,{variants:i,className:"mb-6 md:mb-0",children:s.jsx("img",{src:a,alt:"Diagnosed plant",className:"w-full h-64 object-cover rounded-lg shadow-md"})}),s.jsx(n.E.div,{variants:i,children:(0,s.jsxs)(d.Z,{className:"p-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-primary-700",children:t.disease_name}),(0,s.jsxs)("div",{className:"mt-2 mb-4",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:`${t.confidence}%`}})}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Confidence: ",t.confidence.toFixed(1),"%"]})]}),s.jsx("p",{className:"text-gray-700 mb-4",children:t.description}),(0,s.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-primary-800",children:"Treatment"}),s.jsx("p",{className:"text-gray-700 mt-1",children:t.treatment})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-primary-800",children:"Prevention"}),s.jsx("p",{className:"text-gray-700 mt-1",children:t.prevention})]})]})]})})]}),e.length>1&&(0,s.jsxs)(n.E.div,{variants:i,className:"mt-8",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Other Possible Conditions"}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.slice(1).map((e,a)=>(0,s.jsxs)(d.Z,{className:"p-4",children:[s.jsx("h4",{className:"font-medium text-primary-700",children:e.disease_name}),(0,s.jsxs)("div",{className:"mt-2 mb-2",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-secondary-500 h-2 rounded-full",style:{width:`${e.confidence}%`}})}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Confidence: ",e.confidence.toFixed(1),"%"]})]}),s.jsx("p",{className:"text-sm text-gray-700 line-clamp-3",children:e.description})]},a))})]})]})};var c=t(525);let useDiagnose=()=>{let[e,a]=(0,i.useState)(!1),[t,s]=(0,i.useState)(null),[n,r]=(0,i.useState)(null),diagnose=async(e,t)=>{try{a(!0),s(null);let i=await (0,c.Ix)(e,t);return r(i),i}catch(a){let e=a instanceof Error?a.message:"An unexpected error occurred";return s(e),null}finally{a(!1)}};return{diagnose,reset:()=>{s(null),r(null)},isLoading:e,error:t,result:n}};function DiagnosePage(){let[e,a]=(0,i.useState)(null),[t,r]=(0,i.useState)(""),[l,c]=(0,i.useState)(null),{diagnose:m,isLoading:p,error:u}=useDiagnose(),handleSubmit=async a=>{if(a.preventDefault(),!e||!t)return;let s=await m(e,t);s&&c(s)};return(0,s.jsxs)("div",{className:"page-container py-12",children:[s.jsx(n.E.h1,{className:"section-title text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Diagnose Your Plant"}),s.jsx(n.E.p,{className:"text-gray-600 text-center max-w-3xl mx-auto mb-12",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.1},children:"Upload a clear image of the affected plant part and get an instant diagnosis with treatment recommendations."}),l?(0,s.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[s.jsx(DiagnosisResult,{diagnosis:l.diagnosis,imageUrl:l.image_url}),s.jsx("div",{className:"text-center mt-12",children:s.jsx(o.z,{variant:"outline",onClick:()=>{a(null),r(""),c(null)},className:"mx-auto",children:"Diagnose Another Plant"})})]}):s.jsx(n.E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},initial:"hidden",animate:"visible",children:s.jsx(d.Z,{className:"max-w-2xl mx-auto p-6",children:(0,s.jsxs)("form",{onSubmit:handleSubmit,children:[(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("label",{htmlFor:"plantName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Plant Name"}),s.jsx("input",{type:"text",id:"plantName",value:t,onChange:e=>r(e.target.value),placeholder:"E.g., Tomato, Rose, Basil",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,disabled:p})]}),(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Plant Image"}),s.jsx(ImageUpload,{onImageSelect:e=>{a(e)},isLoading:p})]}),u&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-md",children:u}),s.jsx("div",{className:"flex justify-end",children:s.jsx(o.z,{type:"submit",disabled:!e||!t||p,isLoading:p,children:"Diagnose Plant"})})]})})})]})}},525:(e,a,t)=>{"use strict";t.d(a,{Ix:()=>uploadImage,Wu:()=>getDiagnosisHistory});let s="http://localhost:8000",uploadImage=async(e,a)=>{let t=new FormData;t.append("file",e),t.append("plant_name",a);let i=await fetch(`${s}/api/v1/predict`,{method:"POST",body:t,mode:"cors",credentials:"omit"});if(!i.ok)throw Error("Failed to analyze the image ");return i.json()},getDiagnosisHistory=async()=>{let e=await fetch(`${s}/history`);return e.json()}},7841:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>r,__esModule:()=>n,default:()=>o});var s=t(5153);let i=(0,s.createProxy)(String.raw`/Users/hariharan/Desktop/codebase/plant-doctor-frontend/src/app/diagnose/page.tsx`),{__esModule:n,$$typeof:r}=i,l=i.default,o=l}};var a=require("../../webpack-runtime.js");a.C(e);var __webpack_exec__=e=>a(a.s=e),t=a.X(0,[20,170,99,215],()=>__webpack_exec__(3254));module.exports=t})();