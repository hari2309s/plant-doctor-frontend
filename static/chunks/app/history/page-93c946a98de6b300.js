(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{8736:function(e,a,t){Promise.resolve().then(t.bind(t,2644))},2644:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return HistoryPage}});var i=t(7437),s=t(2265),n=t(5251),r=t(609),l=t(1396),o=t.n(l);let HistoryCard=e=>{let{item:a}=e,t=a.diagnosis[0],s=new Date(a.timestamp).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,i.jsx)(r.Z,{className:"h-full",hoverEffect:!0,children:(0,i.jsx)(o(),{href:"/diagnose/".concat(a.id),className:"block h-full",children:(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsx)("div",{className:"h-48 overflow-hidden",children:(0,i.jsx)("img",{src:a.image_url,alt:a.plant_name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105"})}),(0,i.jsxs)("div",{className:"p-4 flex-grow",children:[(0,i.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:a.plant_name}),(0,i.jsx)("span",{className:"text-xs text-gray-500",children:s})]}),(0,i.jsxs)("div",{className:"mb-3",children:[(0,i.jsx)("span",{className:"inline-block bg-primary-100 text-primary-800 text-xs px-2 py-1 rounded-full",children:t.disease_name}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-2",children:(0,i.jsx)("div",{className:"bg-primary-600 h-1.5 rounded-full",style:{width:"".concat(t.confidence,"%")}})})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:t.description})]})]})})})};var c=t(5436);function HistoryPage(){let[e,a]=(0,s.useState)([]),[t,l]=(0,s.useState)(!0),[o,d]=(0,s.useState)(null);return(0,s.useEffect)(()=>{let fetchHistory=async()=>{try{l(!0);let e=await (0,c.Wu)();a(e.history)}catch(e){d("Failed to load diagnosis history. Please try again later."),console.error(e)}finally{l(!1)}};fetchHistory()},[]),(0,i.jsxs)("div",{className:"page-container py-12",children:[(0,i.jsx)(n.E.h1,{className:"section-title text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Diagnosis History"}),(0,i.jsx)(n.E.p,{className:"text-gray-600 text-center max-w-3xl mx-auto mb-12",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.1},children:"View your past plant diagnoses and revisit treatment recommendations."}),t?(0,i.jsx)("div",{className:"flex justify-center items-center py-20",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-600"})}):o?(0,i.jsx)(r.Z,{className:"p-6 max-w-xl mx-auto bg-red-50 border border-red-200",children:(0,i.jsx)("p",{className:"text-red-700",children:o})}):0===e.length?(0,i.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:(0,i.jsxs)(r.Z,{className:"p-8 max-w-xl mx-auto",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"No diagnoses yet"}),(0,i.jsx)("p",{className:"text-gray-600 mb-6",children:"You haven't diagnosed any plants yet. Upload a plant image to get started."}),(0,i.jsx)("a",{href:"/diagnose",className:"inline-block bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 transition-colors",children:"Diagnose a Plant"})]})}):(0,i.jsx)(n.E.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,i.jsx)(n.E.div,{children:(0,i.jsx)(HistoryCard,{item:e})},e.id))})]})}},609:function(e,a,t){"use strict";t.d(a,{Z:function(){return Card}});var i=t(7437);t(2265);var s=t(5251);let Card=e=>{let{children:a,className:t="",onClick:n,hoverEffect:r=!1}=e;return(0,i.jsx)(s.E.div,{whileHover:r?{y:-5,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"}:{},onClick:n,className:"bg-white rounded-lg shadow-md overflow-hidden ".concat(t),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a})}},5436:function(e,a,t){"use strict";t.d(a,{Ix:function(){return uploadImage},Wu:function(){return getDiagnosisHistory}});let i="http://localhost:8000",uploadImage=async(e,a)=>{let t=new FormData;t.append("file",e),t.append("plant_name",a);let s=await fetch("".concat(i,"/api/v1/predict"),{method:"POST",body:t,mode:"cors",credentials:"omit"});if(!s.ok)throw Error("Failed to analyze the image ");return s.json()},getDiagnosisHistory=async()=>{let e=await fetch("".concat(i,"/history"));return e.json()}}},function(e){e.O(0,[220,396,971,472,744],function(){return e(e.s=8736)}),_N_E=e.O()}]);