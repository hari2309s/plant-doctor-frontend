(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[89],{7126:function(e,a,t){Promise.resolve().then(t.bind(t,1633))},1633:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return DiagnosePage}});var s=t(7437),i=t(2265),n=t(5251),r=t(5020),l=t(7431),o=t(3089);let ImageUpload=e=>{let{onImageSelect:a,isLoading:t=!1}=e,[c,d]=(0,i.useState)(null),[m,u]=(0,i.useState)(null),x=(0,i.useCallback)(e=>{let t=e[0];if(t){u(t),a(t);let e=new FileReader;e.onload=()=>{d(e.result)},e.readAsDataURL(t)}},[a]),{getRootProps:h,getInputProps:g,isDragActive:p}=(0,r.uI)({onDrop:x,accept:{"image/*":[".jpeg",".jpg",".png",".gif"]},maxFiles:1,disabled:t});return(0,s.jsx)("div",{className:"w-full",children:c?(0,s.jsxs)(n.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative rounded-lg overflow-hidden",children:[(0,s.jsx)("img",{src:c,alt:"Plant preview",className:"w-full h-64 object-cover rounded-lg"}),!t&&(0,s.jsx)(o.z,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 bg-white bg-opacity-80 hover:bg-opacity-100 rounded-full p-1",onClick:()=>{d(null),u(null)},children:(0,s.jsx)(l.apv,{className:"h-5 w-5"})}),t&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-white"})})]}):(0,s.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors ".concat(p?"border-primary-400 bg-primary-50":"border-gray-300 hover:border-primary-300"," ").concat(t?"opacity-50 cursor-not-allowed":""),...h({onAnimationEnd:void 0}),children:[(0,s.jsx)("input",{...g()}),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-2",children:[(0,s.jsx)(l.h5O,{className:"h-12 w-12 text-gray-400"}),(0,s.jsx)("p",{className:"text-lg font-medium",children:p?"Drop the image here":"Drag & drop a plant image here"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"or click to select a file"}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Supported formats: JPEG, PNG, GIF"})]})]})})};var c=t(609);let DiagnosisResult=e=>{let{diagnosis:a,imageUrl:t}=e;if(!a||0===a.length)return null;let i=a[0],r={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,s.jsxs)(n.E.div,{variants:{hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",className:"mt-8",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Diagnosis Results"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[t&&(0,s.jsx)(n.E.div,{variants:r,className:"mb-6 md:mb-0",children:(0,s.jsx)("img",{src:t,alt:"Diagnosed plant",className:"w-full h-64 object-cover rounded-lg shadow-md"})}),(0,s.jsx)(n.E.div,{variants:r,children:(0,s.jsxs)(c.Z,{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-primary-700",children:i.disease_name}),(0,s.jsxs)("div",{className:"mt-2 mb-4",children:[(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,s.jsx)("div",{className:"bg-primary-600 h-2.5 rounded-full",style:{width:"".concat(i.confidence,"%")}})}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Confidence: ",i.confidence.toFixed(1),"%"]})]}),(0,s.jsx)("p",{className:"text-gray-700 mb-4",children:i.description}),(0,s.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-primary-800",children:"Treatment"}),(0,s.jsx)("p",{className:"text-gray-700 mt-1",children:i.treatment})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-primary-800",children:"Prevention"}),(0,s.jsx)("p",{className:"text-gray-700 mt-1",children:i.prevention})]})]})]})})]}),a.length>1&&(0,s.jsxs)(n.E.div,{variants:r,className:"mt-8",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Other Possible Conditions"}),(0,s.jsx)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.slice(1).map((e,a)=>(0,s.jsxs)(c.Z,{className:"p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-primary-700",children:e.disease_name}),(0,s.jsxs)("div",{className:"mt-2 mb-2",children:[(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-secondary-500 h-2 rounded-full",style:{width:"".concat(e.confidence,"%")}})}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Confidence: ",e.confidence.toFixed(1),"%"]})]}),(0,s.jsx)("p",{className:"text-sm text-gray-700 line-clamp-3",children:e.description})]},a))})]})]})};var d=t(5436);let useDiagnose=()=>{let[e,a]=(0,i.useState)(!1),[t,s]=(0,i.useState)(null),[n,r]=(0,i.useState)(null),diagnose=async(e,t)=>{try{a(!0),s(null);let i=await (0,d.Ix)(e,t);return r(i),i}catch(a){let e=a instanceof Error?a.message:"An unexpected error occurred";return s(e),null}finally{a(!1)}};return{diagnose,reset:()=>{s(null),r(null)},isLoading:e,error:t,result:n}};function DiagnosePage(){let[e,a]=(0,i.useState)(null),[t,r]=(0,i.useState)(""),[l,d]=(0,i.useState)(null),{diagnose:m,isLoading:u,error:x}=useDiagnose(),handleSubmit=async a=>{if(a.preventDefault(),!e||!t)return;let s=await m(e,t);s&&d(s)};return(0,s.jsxs)("div",{className:"page-container py-12",children:[(0,s.jsx)(n.E.h1,{className:"section-title text-center",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:"Diagnose Your Plant"}),(0,s.jsx)(n.E.p,{className:"text-gray-600 text-center max-w-3xl mx-auto mb-12",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.1},children:"Upload a clear image of the affected plant part and get an instant diagnosis with treatment recommendations."}),l?(0,s.jsxs)(n.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[(0,s.jsx)(DiagnosisResult,{diagnosis:l.diagnosis,imageUrl:l.image_url}),(0,s.jsx)("div",{className:"text-center mt-12",children:(0,s.jsx)(o.z,{variant:"outline",onClick:()=>{a(null),r(""),d(null)},className:"mx-auto",children:"Diagnose Another Plant"})})]}):(0,s.jsx)(n.E.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},initial:"hidden",animate:"visible",children:(0,s.jsx)(c.Z,{className:"max-w-2xl mx-auto p-6",children:(0,s.jsxs)("form",{onSubmit:handleSubmit,children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{htmlFor:"plantName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Plant Name"}),(0,s.jsx)("input",{type:"text",id:"plantName",value:t,onChange:e=>r(e.target.value),placeholder:"E.g., Tomato, Rose, Basil",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0,disabled:u})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Plant Image"}),(0,s.jsx)(ImageUpload,{onImageSelect:e=>{a(e)},isLoading:u})]}),x&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-red-50 text-red-700 rounded-md",children:x}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(o.z,{type:"submit",disabled:!e||!t||u,isLoading:u,children:"Diagnose Plant"})})]})})})]})}},3089:function(e,a,t){"use strict";t.d(a,{z:function(){return Button}});var s=t(7437);t(2265);var i=t(5251);let Button=e=>{let{children:a,variant:t="primary",size:n="md",isLoading:r=!1,className:l="",disabled:o,...c}=e;return(0,s.jsx)(i.E.button,{whileHover:{scale:o||r?1:1.03},whileTap:{scale:o||r?1:.98},className:"".concat("rounded-md font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-secondary-500 text-white hover:bg-secondary-600 focus:ring-secondary-400",outline:"border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 focus:ring-gray-400",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-400"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[n]," ").concat(r?"opacity-80 cursor-not-allowed":""," ").concat(o?"opacity-50 cursor-not-allowed":""," ").concat(l),disabled:o||r,...c,onAnimationStart:void 0,onDragStart:void 0,onDragEnd:void 0,onDrag:void 0,children:r?(0,s.jsxs)("div",{className:"flex items-center justify-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):a})}},609:function(e,a,t){"use strict";t.d(a,{Z:function(){return Card}});var s=t(7437);t(2265);var i=t(5251);let Card=e=>{let{children:a,className:t="",onClick:n,hoverEffect:r=!1}=e;return(0,s.jsx)(i.E.div,{whileHover:r?{y:-5,boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"}:{},onClick:n,className:"bg-white rounded-lg shadow-md overflow-hidden ".concat(t),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:a})}},5436:function(e,a,t){"use strict";t.d(a,{Ix:function(){return uploadImage},Wu:function(){return getDiagnosisHistory}});let s="http://localhost:8000",uploadImage=async(e,a)=>{let t=new FormData;t.append("file",e),t.append("plant_name",a);let i=await fetch("".concat(s,"/api/v1/predict"),{method:"POST",body:t,mode:"cors",credentials:"omit"});if(!i.ok)throw Error("Failed to analyze the image ");return i.json()},getDiagnosisHistory=async()=>{let e=await fetch("".concat(s,"/history"));return e.json()}}},function(e){e.O(0,[982,220,681,971,472,744],function(){return e(e.s=7126)}),_N_E=e.O()}]);